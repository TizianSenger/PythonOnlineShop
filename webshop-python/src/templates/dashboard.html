{% extends "base.html" %}

{% block title %}Dashboard - WebShop{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">ğŸ“‹ Dashboard</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <div class="card mb-4">
        <h2>Willkommen, {{ user.name }}! ğŸ‘‹</h2>
        <p class="text-muted mt-2">Email: {{ user.email }}</p>
        <p class="text-muted">Rolle: <span
                class="badge {% if user.role == 'admin' %}badge-success{% else %}badge-primary{% endif %}">{{
                user.role }}</span></p>
        <hr class="my-3">
        <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
            <a href="{{ url_for('privacy_policy') }}" class="btn btn-sm" style="font-size: 0.9rem;">ğŸ“‹ Datenschutz</a>
            <a href="{{ url_for('impressum') }}" class="btn btn-sm" style="font-size: 0.9rem;">â„¹ï¸ Impressum</a>
            <a href="{{ url_for('gdpr_rights') }}" class="btn btn-sm" style="font-size: 0.9rem;">âœ‹ Betroffenenrechte</a>
        </div>
    </div>
    <div class="card mb-4">
        <h3>â„¹ï¸ Allgemeine Informationen</h3>
        <p class="mt-3">
            Willkommen in deinem WebShop Dashboard! Hier kannst du deine Kontoeinstellungen verwalten
            {% if user.role == 'admin' %}
            und deine Produkte hinzufÃ¼gen oder bearbeiten.
            {% else %}
            und deine EinkÃ¤ufe verfolgen.
            {% endif %}
        </p>
    </div>
    {% if user.role == 'admin' %}
    <div class="grid grid-2 mb-4">
        <a href="/admin/products" class="card"
            style="text-decoration: none; cursor: pointer; display: flex; align-items: center; justify-content: space-between; transition: all 0.3s ease;">
            <div>
                <h3>âš™ï¸ Produktverwaltung</h3>
                <p class="text-muted">Verwalte deine Produkte</p>
            </div>
            <span style="font-size: 2.5rem;">â†’</span>
        </a>
        <a href="/orders" class="card"
            style="text-decoration: none; cursor: pointer; display: flex; align-items: center; justify-content: space-between; transition: all 0.3s ease;">
            <div>
                <h3>ğŸ“¦ Bestellungen</h3>
                <p class="text-muted">Verwalte alle Bestellungen</p>
            </div>
            <span style="font-size: 2.5rem;">â†’</span>
        </a>
    </div>
    <div class="card mb-4">
        <h3>ğŸ“Š Statistiken</h3>
        <p class="text-muted mt-2">Produkte im Shop: <strong>{{ products|length }}</strong></p>
    </div>
    {% else %}
    <div class="grid grid-2 mb-4">
        <a href="/orders" class="card"
            style="text-decoration: none; cursor: pointer; display: flex; align-items: center; justify-content: space-between; transition: all 0.3s ease;">
            <div>
                <h3>ğŸ“¦ Meine Bestellungen</h3>
                <p class="text-muted">Verfolge deine Bestellungen</p>
            </div>
            <span style="font-size: 2.5rem;">â†’</span>
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Dashboard-specific scripts if needed
</script>
{% endblock %}